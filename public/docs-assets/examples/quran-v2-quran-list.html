<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v2 Quran List - Modern JavaScript</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; }
        .section { background: white; margin: 20px 0; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .loading { text-align: center; color: #666; padding: 20px; }
        .error { color: red; background: #ffe6e6; padding: 10px; border-radius: 4px; }
        .success { color: green; background: #e6ffe6; padding: 10px; border-radius: 4px; }
        .json-display { background: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 15px; margin: 10px 0; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto; }
        .quran-item { border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 10px 0; background: #fafafa; transition: all 0.3s ease; }
        .quran-item:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .quran-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .quran-name { font-weight: bold; color: #2c5aa0; font-size: 16px; }
        .quran-details { font-size: 12px; color: #666; margin-top: 5px; }
        .format-tag { display: inline-block; background: #e3f2fd; color: #1976d2; padding: 2px 6px; border-radius: 3px; font-size: 10px; margin: 2px; }
        .expand-button { background: #6c757d; color: white; border: none; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 11px; }
        .expand-button:hover { background: #5a6268; }
        .expanded-content { margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd; display: none; }
        .expanded-content.show { display: block; }
        .quran-info { font-size: 11px; color: #333; background: #f8f9fa; padding: 12px; border-radius: 4px; margin: 10px 0; word-break: break-all; line-height: 1.4; }
    </style>
</head>
<body>
    <div class="container">
        <h1>v2 Quran List</h1>
        <p>Modern v2 API endpoint for retrieving Quran text formats with enhanced data structure. <strong>Quran IDs are essential</strong> - they're used throughout all API endpoints to specify which Quran text format to retrieve.</p>
        
        <div class="section">
            <h2>Available Quran Formats (v2 API)</h2>
            <div id="demo-1" class="loading">Loading Quran list...</div>
        </div>
        
        <div class="section">
            <h2>Raw JSON Response</h2>
            <div id="json-response" class="json-display">JSON response will appear here...</div>
        </div>
</div>

<script>
        // Modern JavaScript implementation for v2 API
        async function loadQuranList() {
            try {
                const response = await fetch('https://api.globalquran.com/v2/list/quran?key=REPLACE_WITH_YOUR_KEY');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                displayQuranList(data);
                displayJsonResponse(data);
            } catch (error) {
                console.error('Error loading Quran list:', error);
                document.getElementById('demo-1').innerHTML = `<div class="error">Error loading Quran list: ${error.message}</div>`;
            }
        }

        // Display Quran list
        function displayQuranList(data) {
            const container = document.getElementById('demo-1');
            
            if (data.list && typeof data.list === 'object') {
                const quranFormats = Object.values(data.list);
                const stats = `<div class="success">Found ${quranFormats.length} Quran formats</div>`;
                
                container.innerHTML = stats;
                
                // Display Quran format cards
                const cardsContainer = document.createElement('div');
                cardsContainer.style.marginTop = '20px';
                
                quranFormats.forEach((quranFormat, index) => {
                    const quranId = Object.keys(data.list)[index];
                    const card = document.createElement('div');
                    card.className = 'quran-item';
                    card.dataset.quranId = quranId;
                    card.dataset.quranData = JSON.stringify(quranFormat);
                    
                    const formatTags = quranFormat.format ? 
                        `<span class="format-tag">${quranFormat.format}</span>` : '';
                    
                    card.innerHTML = `
                        <div class="quran-header">
                            <div>
                                <div class="quran-name">${quranFormat.name || 'Unknown Format'}</div>
                                <div class="quran-details">
                                    <strong>ID:</strong> <code style="background: #e3f2fd; color: #1976d2; padding: 1px 4px; border-radius: 2px; font-size: 10px;">${quranId}</code> | 
                                    Language: ${quranFormat.language_code || 'N/A'} | 
                                    Type: ${quranFormat.type || 'N/A'} | 
                                    Format: ${quranFormat.format || 'N/A'}
                                </div>
                                <div class="format-tags">${formatTags}</div>
                            </div>
                            <div>
                                <button class="expand-button" onclick="toggleExpand('${quranId}')">
                                    <i class="fas fa-info-circle"></i> Info
                                </button>
                            </div>
                        </div>
                        <div class="expanded-content" id="expanded-${quranId}">
                            <div class="quran-info">
                                <span id="quran-info-${quranId}">Click Info to see details</span>
                            </div>
                        </div>
                    `;
                    
                    cardsContainer.appendChild(card);
                });
                
                container.appendChild(cardsContainer);
            } else {
                container.innerHTML = '<div class="error">No Quran format data found</div>';
            }
        }

        // Display raw JSON response
        function displayJsonResponse(data) {
            const container = document.getElementById('json-response');
            container.textContent = JSON.stringify(data, null, 2);
        }

        // Toggle expand/collapse for Quran info
        function toggleExpand(quranId) {
            const expandedContent = document.getElementById(`expanded-${quranId}`);
            const expandButton = event.target.closest('.expand-button');
            
            if (expandedContent.classList.contains('show')) {
                expandedContent.classList.remove('show');
                expandButton.innerHTML = '<i class="fas fa-info-circle"></i> Info';
            } else {
                expandedContent.classList.add('show');
                expandButton.innerHTML = '<i class="fas fa-chevron-up"></i> Hide';
                
                // Generate and show Quran details immediately when expanding
                const card = document.querySelector(`[data-quran-id="${quranId}"]`);
                if (card) {
                    const quranData = JSON.parse(card.dataset.quranData);
                    
                    // Update the Quran info display
                    const infoElement = document.getElementById(`quran-info-${quranId}`);
                    if (infoElement) {
                        // Always use placeholder for info sections
                        const apiKeyPlaceholder = 'YOUR_API_KEY_HERE';
                        
                        infoElement.innerHTML = `
                            <strong>Quran Format Details:</strong><br>
                            <strong>ID:</strong> ${quranId}<br>
                            <strong>Name:</strong> ${quranData.name || 'N/A'}<br>
                            <strong>English Name:</strong> ${quranData.english_name || 'N/A'}<br>
                            <strong>Native Name:</strong> ${quranData.native_name || 'N/A'}<br>
                            <strong>Language Code:</strong> ${quranData.language_code || 'N/A'}<br>
                            <strong>Type:</strong> ${quranData.type || 'N/A'}<br>
                            <strong>Format:</strong> ${quranData.format || 'N/A'}<br>
                            <strong>Source:</strong> ${quranData.source || 'N/A'}<br>
                            <strong>Default:</strong> ${quranData.default ? 'Yes' : 'No'}<br>
                            <strong>Supported Version:</strong> ${quranData.supported_version || 'N/A'}<br><br>
                            
                            <strong>API Usage Examples:</strong><br>
                            <div style="background: #e8f5e8; padding: 8px; border-radius: 4px; margin: 5px 0; font-family: monospace; font-size: 10px;">
                                <strong>Get Surah 1:</strong><br>
                                GET https://api.globalquran.com/v1/surah/1/${quranId}?key=${apiKeyPlaceholder}<br><br>
                                <strong>Get Ayah 1:</strong><br>
                                GET https://api.globalquran.com/v1/ayah/1/${quranId}?key=${apiKeyPlaceholder}<br><br>
                                <strong>Get Page 1:</strong><br>
                                GET https://api.globalquran.com/v1/page/1/${quranId}?key=${apiKeyPlaceholder}<br><br>
                                <strong>Get Juz 1:</strong><br>
                                GET https://api.globalquran.com/v1/juz/1/${quranId}?key=${apiKeyPlaceholder}
                            </div>
                            
                            <strong>Raw JSON Data:</strong><br>
                            <div style="background: #f0f0f0; padding: 8px; border-radius: 4px; margin: 5px 0; font-family: monospace; font-size: 10px; max-height: 200px; overflow-y: auto;">
                                ${JSON.stringify(quranData, null, 2)}
                            </div>
                        `;
                    }
                }
            }
        }

        // Load Quran list on page load
        document.addEventListener('DOMContentLoaded', loadQuranList);
    </script>
</body>
</html>
