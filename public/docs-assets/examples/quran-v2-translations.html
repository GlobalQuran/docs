<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>v2 Translations List - Modern JavaScript</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; background: #f8f9fa; }
        .container { max-width: 1200px; margin: 0 auto; }
        .section { background: white; margin: 20px 0; padding: 20px; border-radius: 8px; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }
        .loading { text-align: center; color: #666; padding: 20px; }
        .error { color: red; background: #ffe6e6; padding: 10px; border-radius: 4px; }
        .success { color: green; background: #e6ffe6; padding: 10px; border-radius: 4px; }
        .json-display { background: #f8f9fa; border: 1px solid #ddd; border-radius: 4px; padding: 15px; margin: 10px 0; font-family: monospace; font-size: 12px; max-height: 300px; overflow-y: auto; }
        .translation-item { border: 1px solid #ddd; border-radius: 8px; padding: 15px; margin: 10px 0; background: #fafafa; transition: all 0.3s ease; }
        .translation-item:hover { box-shadow: 0 2px 8px rgba(0,0,0,0.1); }
        .translation-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .translation-name { font-weight: bold; color: #2c5aa0; font-size: 16px; }
        .translation-details { font-size: 12px; color: #666; margin-top: 5px; }
        .language-tag { display: inline-block; background: #e8f5e8; color: #2e7d32; padding: 2px 6px; border-radius: 3px; font-size: 10px; margin: 2px; }
        .expand-button { background: #6c757d; color: white; border: none; padding: 6px 12px; border-radius: 15px; cursor: pointer; font-size: 11px; }
        .expand-button:hover { background: #5a6268; }
        .expanded-content { margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd; display: none; }
        .expanded-content.show { display: block; }
        .translation-info { font-size: 11px; color: #333; background: #f8f9fa; padding: 12px; border-radius: 4px; margin: 10px 0; word-break: break-all; line-height: 1.4; }
    </style>
</head>
<body>
    <div class="container">
        <h1>v2 Translations List</h1>
        <p>Modern v2 API endpoint for retrieving translations with improved data structure. <strong>Translation IDs are crucial</strong> - they're used as parameters in API calls to specify which translation to include with Quran text.</p>
        
        <div class="section">
            <h2>Available Translations (v2 API)</h2>
            <div id="demo-1" class="loading">Loading translations list...</div>
        </div>
        
        <div class="section">
            <h2>Raw JSON Response</h2>
            <div id="json-response" class="json-display">JSON response will appear here...</div>
        </div>
</div>

<script>
        // Modern JavaScript implementation for v2 API
        async function loadTranslationsList() {
            try {
                const response = await fetch('https://api.globalquran.com/v2/list/translation?key=REPLACE_WITH_YOUR_KEY');
                
                if (!response.ok) {
                    throw new Error(`HTTP error! status: ${response.status}`);
                }
                
                const data = await response.json();
                displayTranslationsList(data);
                displayJsonResponse(data);
            } catch (error) {
                console.error('Error loading translations list:', error);
                document.getElementById('demo-1').innerHTML = `<div class="error">Error loading translations list: ${error.message}</div>`;
            }
        }

        // Display translations list
        function displayTranslationsList(data) {
            const container = document.getElementById('demo-1');
            
            if (data.list && typeof data.list === 'object') {
                const translations = Object.values(data.list);
                const stats = `<div class="success">Found ${translations.length} translations</div>`;
                
                container.innerHTML = stats;
                
                // Display translation cards
                const cardsContainer = document.createElement('div');
                cardsContainer.style.marginTop = '20px';
                
                translations.forEach((translation, index) => {
                    const translationId = Object.keys(data.list)[index];
                    const card = document.createElement('div');
                    card.className = 'translation-item';
                    card.dataset.translationId = translationId;
                    card.dataset.translationData = JSON.stringify(translation);
                    
                    const languageTags = translation.language_code ? 
                        `<span class="language-tag">${translation.language_code}</span>` : '';
                    
                    card.innerHTML = `
                        <div class="translation-header">
                            <div>
                                <div class="translation-name">${translation.name || 'Unknown Translation'}</div>
                                <div class="translation-details">
                                    <strong>ID:</strong> <code style="background: #e8f5e8; color: #2e7d32; padding: 1px 4px; border-radius: 2px; font-size: 10px;">${translationId}</code> | 
                                    Language: ${translation.language_code || 'N/A'} | 
                                    Type: ${translation.type || 'N/A'} | 
                                    Format: ${translation.format || 'N/A'}
                                </div>
                                <div class="language-tags">${languageTags}</div>
                            </div>
                            <div>
                                <button class="expand-button" onclick="toggleExpand('${translationId}')">
                                    <i class="fas fa-info-circle"></i> Info
                                </button>
                            </div>
                        </div>
                        <div class="expanded-content" id="expanded-${translationId}">
                            <div class="translation-info">
                                <span id="translation-info-${translationId}">Click Info to see details</span>
                            </div>
                        </div>
                    `;
                    
                    cardsContainer.appendChild(card);
                });
                
                container.appendChild(cardsContainer);
            } else {
                container.innerHTML = '<div class="error">No translation data found</div>';
            }
        }

        // Display raw JSON response
        function displayJsonResponse(data) {
            const container = document.getElementById('json-response');
            container.textContent = JSON.stringify(data, null, 2);
        }

        // Toggle expand/collapse for translation info
        function toggleExpand(translationId) {
            const expandedContent = document.getElementById(`expanded-${translationId}`);
            const expandButton = event.target.closest('.expand-button');
            
            if (expandedContent.classList.contains('show')) {
                expandedContent.classList.remove('show');
                expandButton.innerHTML = '<i class="fas fa-info-circle"></i> Info';
            } else {
                expandedContent.classList.add('show');
                expandButton.innerHTML = '<i class="fas fa-chevron-up"></i> Hide';
                
                // Generate and show translation details immediately when expanding
                const card = document.querySelector(`[data-translation-id="${translationId}"]`);
                if (card) {
                    const translationData = JSON.parse(card.dataset.translationData);
                    
                    // Update the translation info display
                    const infoElement = document.getElementById(`translation-info-${translationId}`);
                    if (infoElement) {
                        // Always use placeholder for info sections
                        const apiKeyPlaceholder = 'YOUR_API_KEY_HERE';
                        
                        infoElement.innerHTML = `
                            <strong>Translation Details:</strong><br>
                            <strong>ID:</strong> ${translationId}<br>
                            <strong>Name:</strong> ${translationData.name || 'N/A'}<br>
                            <strong>English Name:</strong> ${translationData.english_name || 'N/A'}<br>
                            <strong>Native Name:</strong> ${translationData.native_name || 'N/A'}<br>
                            <strong>Language Code:</strong> ${translationData.language_code || 'N/A'}<br>
                            <strong>Type:</strong> ${translationData.type || 'N/A'}<br>
                            <strong>Format:</strong> ${translationData.format || 'N/A'}<br>
                            <strong>Source:</strong> ${translationData.source || 'N/A'}<br>
                            <strong>Default:</strong> ${translationData.default ? 'Yes' : 'No'}<br>
                            <strong>Supported Version:</strong> ${translationData.supported_version || 'N/A'}<br><br>
                            
                            <strong>API Usage Examples:</strong><br>
                            <div style="background: #e3f2fd; padding: 8px; border-radius: 4px; margin: 5px 0; font-family: monospace; font-size: 10px;">
                                <strong>Get Surah 1 with Translation:</strong><br>
                                GET https://api.globalquran.com/v1/surah/1/${translationId}?key=${apiKeyPlaceholder}<br><br>
                                <strong>Get Ayah 1 with Translation:</strong><br>
                                GET https://api.globalquran.com/v1/ayah/1/${translationId}?key=${apiKeyPlaceholder}<br><br>
                                <strong>Get Page 1 with Translation:</strong><br>
                                GET https://api.globalquran.com/v1/page/1/${translationId}?key=${apiKeyPlaceholder}<br><br>
                                <strong>Get Juz 1 with Translation:</strong><br>
                                GET https://api.globalquran.com/v1/juz/1/${translationId}?key=${apiKeyPlaceholder}
                            </div>
                            
                            <strong>Raw JSON Data:</strong><br>
                            <div style="background: #f0f0f0; padding: 8px; border-radius: 4px; margin: 5px 0; font-family: monospace; font-size: 10px; max-height: 200px; overflow-y: auto;">
                                ${JSON.stringify(translationData, null, 2)}
                            </div>
                        `;
                    }
                }
            }
        }

        // Load translations list on page load
        document.addEventListener('DOMContentLoaded', loadTranslationsList);
    </script>
</body>
</html>
